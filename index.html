<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¦¬ë“¬ê²Œì„</title>
  <style>
    body { text-align: center; font-family: sans-serif; margin-top: 100px; }
    button { font-size: 20px; margin: 10px; padding: 10px 20px; }
  </style>
</head>
<body>
  <h1>ğŸµ ë¦¬ë“¬ê²Œì„ ğŸµ</h1>
  <button onclick="startGame()">ê²Œì„ ì‹œì‘</button>
  <button onclick="showRanking()">ë­í‚¹ í™•ì¸</button>

  <div id="content"></div>

<script>
  let gameArea;
  let score = 0;
  let circles = [];
  let gameInterval;

  // íŒì • ìƒìˆ˜
  const TARGET = 70;
  const PERFECT_MIN = 60;
  const PERFECT_MAX = 80;

  // ğŸ”„ ê²Œì„ í™”ë©´ ì—…ë°ì´íŠ¸ (ê°€ì´ë“œ í¬í•¨)
  function updateGame(ctx) {
    ctx.clearRect(0, 0, gameArea.width, gameArea.height);

    circles.forEach(c => {
      c.radius += 1; // ì†ë„ ê·¸ëŒ€ë¡œ
      // ì› (ê²€ì • ì‹¤ì„ )
      ctx.beginPath();
      ctx.arc(c.x, c.y, c.radius, 0, Math.PI * 2);
      ctx.strokeStyle = "black";
      ctx.setLineDash([]);
      ctx.stroke();

      // ë°˜ì§€ë¦„ í‘œê¸°
      ctx.fillText("r=" + Math.floor(c.radius), c.x + c.radius + 5, c.y);
    });

    // ğŸ¯ ê°€ì´ë“œ: í¼í™íŠ¸ ì¡´(60~80) í…Œë‘ë¦¬ + ì¤‘ì•™ íƒ€ê²Ÿ(70)
    // 1) í¼í™íŠ¸ ê²½ê³„ 60, 80 (ì´ˆë¡ ì ì„ )
    ctx.beginPath();
    ctx.arc(300, 200, PERFECT_MIN, 0, Math.PI * 2);
    ctx.strokeStyle = "green";
    ctx.setLineDash([4, 4]);
    ctx.stroke();

    ctx.beginPath();
    ctx.arc(300, 200, PERFECT_MAX, 0, Math.PI * 2);
    ctx.stroke();

    // 2) ì¤‘ì•™ íƒ€ê²Ÿ 70 (ë¹¨ê°„ ì ì„ )
    ctx.beginPath();
    ctx.arc(300, 200, TARGET, 0, Math.PI * 2);
    ctx.strokeStyle = "red";
    ctx.setLineDash([6, 4]);
    ctx.stroke();

    // ë³µì›
    ctx.setLineDash([]);
    ctx.strokeStyle = "black";

    requestAnimationFrame(() => updateGame(ctx));
  }

  // âœ… íŒì • ì²´í¬
  function checkHit(event) {
    if (event.code !== "Space") return;
    if (circles.length === 0) return;

    const c = circles[0];
    const r = c.radius;
    let gained = 0;

    // ìµœëŒ€ ì ìˆ˜ ì¡°ê±´: 60 < r < 80
    if (r > PERFECT_MIN && r < PERFECT_MAX) {
      gained = 100;
    } else if (Math.abs(r - TARGET) < 25) {
      // ì„¸ì»¨ë“œ ë³´ìƒ: íƒ€ê²Ÿì—ì„œ Â±25 ì´ë‚´
      gained = 50;
    } else {
      gained = 10;
    }

    score += gained;
    document.getElementById("score").innerText = score;
    circles.shift(); // ì‚¬ìš©í•œ ì› ì œê±°
  }

  // ì‹œì‘ ë²„íŠ¼ í´ë¦­ ì‹œ
  function startGame() {
    document.getElementById("content").innerHTML = `
      <p>í•™ë²ˆ: <input id="studentId"></p>
      <p>ì´ë¦„: <input id="name"></p>
      <button onclick="gameStart()">ì…ë ¥ ì™„ë£Œ</button>
    `;
  }

  // ì…ë ¥ ì™„ë£Œ í›„ ê²Œì„ ì‹œì‘
  function gameStart() {
    const id = document.getElementById("studentId").value;
    const name = document.getElementById("name").value;

    document.getElementById("content").innerHTML = `
      <canvas id="gameCanvas" width="600" height="400" style="border:1px solid black;"></canvas>
      <p>ì ìˆ˜: <span id="score">0</span></p>
      <p>${id} ${name} ë‹˜, ìŒì•…ì— ë§ì¶° í‚¤ë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”! (ìŠ¤í˜ì´ìŠ¤ë°”)</p>
    `;

    gameArea = document.getElementById("gameCanvas");
    const ctx = gameArea.getContext("2d");

    gameInterval = setInterval(createCircle, 2000); // ì†ë„ ê·¸ëŒ€ë¡œ(2ì´ˆë§ˆë‹¤ ìƒì„±)
    requestAnimationFrame(() => updateGame(ctx));
    document.addEventListener("keydown", checkHit);
  }

  // ì› ìƒì„± í•¨ìˆ˜
  function createCircle() {
    circles.push({ x: 300, y: 200, radius: 10 });
  }

  function showRanking() {
    document.getElementById("content").innerHTML =
      `<p>ë­í‚¹ ê¸°ëŠ¥ì€ ì¶”í›„ ì¶”ê°€ ì˜ˆì •</p>`;
  }
</script>


</body>
</html>

